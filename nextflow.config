process.cache = 'deep'

nextflowVersion = '>=20.0'

import java.time.*
Date now = new Date() 

params {
	day = now.format("yyyMMdd")
    timestamp = now.format("yyyyMMdd-HH-mm-ss")
}

report {
    enabled = true
    file = "pipeline_info/${params.timestamp}_report.html"
}

timeline {
	enabled = true
	file = "pipeline_info/${params.timestamp}_timeline.html"
}

executor {
    queueSize = 100 // optimize on 1, 10, 100 plates worth of wells 96, 960, 9,600
    submitRateLimit = 5
}

singularity {
    pullTimeout = '30 min'
    enabled = true
    autoMounts = true
    cacheDir = "/projects/b1059/singularity" // this is QUEST specific still
    
}

process {
    container = 'andersenlab/nemascan:20220407173056db3227' // update to remote, still need to make my own version

    withLabel: cellpro {
        container = 'cellprofiler/cellprofiler:4.2.1' // update to remote
    }
}